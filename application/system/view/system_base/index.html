{extend name="common@create" /}

{block name="form"}
    <form class="layui-form layui-form-pane">
          <div class="layui-form-item">
              <label for="webtitle" class="layui-form-label">
                  <span class="x-red">*</span>系统标题
              </label>
              <div class="layui-input-block">
                  <input type="text" id="webtitle" name="webtitle" required="true" lay-verify="webtitle"
                  autocomplete="off" class="layui-input " value="{$list.webtitle}">
              </div>
          </div>
          <div class="layui-form-item">
              <label for="keywords" class="layui-form-label">
                  <span class="x-red">*</span>关键字
              </label>
              <div class="layui-input-block">
                  <input type="text" id="keywords" name="keywords" required="true" lay-verify="keywords"
                  autocomplete="off" class="layui-input" value="{$list.keywords}">
              </div>
          </div>
          <div class="layui-form-item">
              <label for="description" class="layui-form-label">
                  <span class="x-red">*</span>描述
              </label>
              <div class="layui-input-block">
                  <input type="input" id="description" name="description" required="true" lay-verify="description"
                  autocomplete="off" class="layui-input" value="{$list.description}">
              </div>
          </div>
          <div class="layui-form-item">
              <label for="thinks" class="layui-form-label">
                  <span class="x-red">*</span>感谢
              </label>
              <div class="layui-input-block">
                  <input type="input" id="thinks" name="thinks" required="true" lay-verify="thinks"
                  autocomplete="off" class="layui-input" value="{$list.thinks}">
              </div>
          </div>
          <div class="layui-form-item">
              <label for="danwei" class="layui-form-label">
                  <span class="x-red">*</span>使用单位
              </label>
              <div class="layui-input-block">
                  <input type="input" id="danwei" name="danwei" required="true" lay-verify="danwei"
                  autocomplete="off" class="layui-input" value="{$list.danwei}">
              </div>
          </div>

              <button  class="layui-btn" lay-filter="edit" lay-submit="">
                  设置
              </button>
      </form>
{/block}

{block name="myjs"}
    <script>
      layui.use(['form','layer'], function(){
          $ = layui.jquery;
        var form = layui.form
        ,layer = layui.layer;
      
        //自定义验证规则
        form.verify({
          webtitle: function(value){
            if(value.length < 3){
              return '系统标题至少得3个字符啊';
            }
            if(value.length >50){
              return '系统标题最多只能填50个字符呀'
            }
          },
          keywords: function(value){
            if(value.length < 3){
              return '关键字至少得3个字符啊';
            }
            if(value.length >60){
              return '关键字最多只能填60个字符呀'
            }
          },
          description: function(value){
            if(value.length < 3){
              return '描述至少得3个字符啊';
            }
            if(value.length >100){
              return '描述最多只能填100个字符呀'
            }
          },
          thinks: function(value){
            if(value.length < 3){
              return '感谢至少得3个字符啊';
            }
            if(value.length >80){
              return '感谢最多只能填80个字符呀'
            }
          },
          danwei: function(value){
            if(value.length < 3){
              return '使用单位至少得3个字符啊';
            }
            if(value.length >20){
              return '使用单位最多只能填20个字符呀'
            }
          },
        });

        //监听提交
        form.on('submit(edit)', function(data){
          $.ajax({
            url:"sysbase/{$list.id}",
            type:"PUT",
            data:data.field,
            dataType:'json',
            success:function(result){
                layer.msg(result.msg);
            },
            error:function(xhr,status,error) {
              layer.msg(xhr + '-' + status + '-' + error);
            }
          });
          return false;
        });


      });
  </script>
{/block}

