{extend name=".././view/create.html" /}
{block name="jscss"}
<style type="text/css">
  .srcSelectStyly{
    /*margin-top:20px;*/
    border-width: 1px;
    border-color:#e2e2e2;
    border-style:solid;
    background-color:#ffffff;
    position:absolute;
    left:0;
    right:0;
    z-index:100;
  }
  .srcSelectStyly dl{
    padding-top: 3px;
    padding-left: 6px;
    background-color:#ffffff;
  }
  .srcSelectStyly dd{
    /*margin-bottom: 3px;*/
    /*background-color:#f2f2f2;*/
    height: 30px;
    padding-top: 10px;
  }
</style>
{/block}
{block name="form"}
    <form class="layui-form layui-form-pane" lay-filter="myform">
          <input id="kaoshi_id" name="kaoshi_id" value="{$list.set.kaoshi_id}" type="hidden">
          <div class="layui-form-item">
    <label for="teacher_name" class="layui-form-label">
      <span class="x-red">*</span>教师姓名
    </label>
    <div class="layui-input-block" id="teacher_id" school_id="{$list.data.school_id|default=''}">
    </div>
  </div>
          <div class="layui-form-item">
            <label for="school_id" class="layui-form-label"><span class="x-red">*</span>学校</label>
            <div class="layui-input-block">
              <select name="school_id" id="school_id" lay-verify="required" lay-filter="src">
                <option value="">请选择学校</option>
              </select>
            </div>
          </div>
          <div class="layui-form-item">
            <label for="ruxuenian" class="layui-form-label">
              <span class="x-red">*</span>年级
            </label>
            <div class="layui-input-block">
              <select name="ruxuenian" id="ruxuenian" lay-verify="required" class="layui-form-label" lay-filter="src">
              </select>
            </div>
          </div>
          <div class="layui-form-item">
            <label for="banji_id" class="layui-form-label">
              <span class="x-red">*</span>班级
            </label>
            <div class="layui-input-block" id="banji_id">
            </div>
          </div>
          <div class="layui-form-item">
            <label for="subject_id" class="layui-form-label">
              <span class="x-red">*</span>学科
            </label>
            <div class="layui-input-block" id="subject_id">
            </div>
          </div>
          <div class="layui-form-item" style="text-align: right;">
              <button  class="layui-btn" lay-filter="mysubmit" lay-submit="">
                  {$list.set.butname}
              </button>
          </div>
      </form>
{/block}

{block name="myjs"}
<script>

layui.use(['createInput','canyuKaoshi','form'], function(){
    var cInput = layui.createInput,
    canyu = layui.canyuKaoshi,
    form = layui.form;

    // 搜索教师
  xmselect = cInput.searchTeacher('teacher_id', true);
  canyu.schoolSelect('school_id', "{$list.set.kaoshi_id}");
  canyu.gradeSelect('ruxuenian', "{$list.set.kaoshi_id}");

    // // 加载学校列表
    // addSchool();

    // // 监听学校下拉菜单
    // form.on('select(school_id)', function (data) {
    //   addNianji();
    // })
    // 监听学校下拉菜单
    form.on('select(src)', function (data) {
      data = form.val("myform");
      if(data.school_id>0 && data.ruxuenian>0){
        canyu.banjiCheckbox('banji_id', data);
      }
      canyu.subjectCheckbox('subject_id', data);
    });

    form.on('checkbox(mycheackbox)', function(data) {
      cInput.checkboxChecked(data);
    });

    // // 添加学校
    // function addSchool(){
    //   // 获取参数
    //   formval = form.val("myform");
    //   cjgl.createSelectOption('school_id', formval, '/kaoshi/kscy/school', 'id', 'title');
    // }

    // // 添加年级
    // function addNianji(){
    //   // 获取参数
    //   formval = form.val("myform");
    //   cjgl.createSelectOption('ruxuenian', formval, '/kaoshi/kscy/grade', 'ruxuenian', 'nianjiname');
    // }

    // // 添加学科
    // function addBanji(){
    //   // 获取参数
    //   formval = form.val("myform");
    //   console.log(formval);
    //   cjgl.createCheckbox('banji_id', formval, '/kaoshi/kscy/class', 'banji_id', 'banTitle');
    // }


    // // 添加学校
    // function addSubject(){
    //   // 获取参数
    //   formval = form.val("myform");
    //   cjgl.createCheckbox('subject_id', formval, '/kaoshi/kscy/subject', 'subject_id', 'title');
    // }


    // // 搜索教师
    // $('#admin_id').bind({
    //   keyup:function(){
    //     var val = $.trim($(this).val());
    //     if(val.length>0){
    //       cjgl.searchTeacher(this, val, 'admin_id[]', 'addTeacher');
    //     }
    //   },
    // })

});



</script>
{/block}

