<!DOCTYPE html>
<html class="x-admin-sm">
<head>
    <meta charset="UTF-8">
    <title>{php}echo session('webtitle'){/php}</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    {load href="__XADMIN__/css/font.css" /}
    {load href="__XADMIN__/css/xadmin.css" /}
    {load href="__XADMIN__/js/jquery.min.js" /}
    {load href="__XADMIN__/lib/layui/layui.js" /}
    {load href="__XADMIN__/js/xadmin.js" /}
    {load href="__XADMIN__/js/cookie.js" /}
    {load href="__XADMIN__/js/md5.min.js" /}
    <title>{$list.webtitle}</title>
</head>
<body>
    <div class="x-body">
        <fieldset class="layui-elem-field">
            <legend>个人信息</legend>
            <div class="layui-field-box">
                <table class="layui-table">
                    <tbody>
                        <tr>
                            <th width="150px">姓名</th>
                            <td>{$list.xingming}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$list.quanpin}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$list.shoupin}</td>
                        </tr>
                        <tr>
                            <th>性别</th>
                            <td>{$list.sex}</td></tr>
                        <tr>
                            <th>出生日期</th>
                            <td>{$list.shengri}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$list.age}周岁</td></tr>
                        <tr>
                            <th>学校班级</th>
                            <td>{$list.stuSchool.title}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$list.stuBanji.banjiTitle}</td></tr>
                        <tr>
                            <th>是否参加考试</th>
                            <td>{$list.kaoshi}</td></tr>
                        <tr>
                            <th>创建时间</th>
                            <td>{$list.create_time}</td></tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
        <!--      荣誉信息 -->
        <fieldset class="layui-elem-field">
            <legend>历次考试成绩</legend>
            <div class="layui-field-box">
                <table class="layui-table" id="chengjiList" lay-filter="chengjiList"></table>
                <table class="layui-table"><th><td></td></th></table>
            </div>
            
        </fieldset>


        
    </div>
    <script>

        // 设置表格初始变量
        options = {
            elem: '#chengjiList',
            toolbar: '#toolbarDemo',
            url:'/renshi/student/chengji', //数据接口
            method:"POST",   //数据接口
            page: true, //开启分页
            loading:true,
            autoSort:false,
            id:'chengjiList',
            defaultToolbar:['filter'],
            limits:[10,25,50,75,100],
            limit:10,
            width:1000,
        };

        // 设置列
        options.cols=[[ //表头
            {field:'id',type:'numbers',sort:true,width:50,title:'序号'}
            ,{field: 'category',sort:true, title: '考试类型', minWidth:100}
            ,{field:'bfdate',title: '考试时间',sort:true, minWidth:150,templet:function(d){
                var date;
                date = d.enddate.split('-');
                endate = date[1] + '-' + date[2];
                endate = d.bfdate + '～' + endate;
                return endate;
            }}
            ,{field:'zuzhi',title: '组织单位',sort:true, minWidth:100}
        ]];

        var xk = '<?php echo json_encode($list["sbj"]);?>';
        xk = eval(decodeURIComponent(xk));
        for(x in xk)
        {
            options.cols[0].push({field:xk[x].lieming, title: xk[x].title , minWidth:100,sort: true});
        }
        options.cols[0].push({field: 'avg', title: '平均分', minWidth:100,sort: true});
        options.cols[0].push({field: 'sum', title: '总分', minWidth:100,sort: true});
        options.cols[0].push({field: 'id', title: '操作',toolbar: '#barDemo',minWidth:125});

        layui.use('table', function(){
            var table = layui.table;
            options.where = {
                student:"{$list.id}"
            }
            userTable = table.render(options);  //获取数据并渲染
        });

    </script>
</body>
</html>