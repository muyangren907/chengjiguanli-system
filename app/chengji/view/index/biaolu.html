{extend name=".././view/create.html" /}

{block name="form"}

  <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>表格录入</legend>
  </fieldset>   

  <div style="padding: 20px; background-color: #F2F2F2;">
    <div class="layui-row layui-col-space15">
      <div class="layui-col-md12">
        <div class="layui-card">
          <div class="layui-card-header">1、载成绩采集表</div>
          <div class="layui-card-body" style="min-height: 180px;">


            <form class="layui-form layui-form-pane" lay-filter="myform">
              <div class="layui-form-item">
                <label for="school" class="layui-form-label"><span class="x-red">*</span>参考学校</label>
                <div class="layui-input-block">
                  {php} $schoollist = schlist('校级','校级',['小学','中小学']);{/php}
                  <select name="school" id="school" lay-filter="school" lay-verify="required">
                    <option value=""></option>
                    {volist name="schoollist" id="vo"}
                      <option value="{$vo.id}"
                      {present name="$list.data.school"}
                        {eq name="$list.data.school" value="$vo.id" }
                          selected
                        {/eq}
                      {/present}>
                        {$vo.title}
                      </option>
                    {/volist}
                  </select>
                </div>
              </div>
              <div class="layui-form-item">
                  {volist name="$list.data.nianji" id="vo"}
                    <label for="title" class="layui-form-label">{$vo.title}</label>
                    <div class="layui-input-block">
                        <input id="{$vo.id}" type="checkbox" title="全选" lay-skin="primary" action="parent">
                    </div>
                    {php}
                      if($key==0){
                        $nianji = $vo['id'];
                      }else{
                        $nianji = $nianji.','.$vo['id'];
                      }
                    {/php}
                  {/volist}
              </div>
              <input type="hidden" name="kaoshi" id="kaoshi" value="{$list.set.kaoshi}">
              <div class="layui-form-item" style="text-align: right;">
                  <button  class="layui-btn" lay-filter="mysubmit" lay-submit="">
                      {$list.set.butname}
                  </button>
              </div>
            </form>
            














          </div>
        </div>
      </div>

      <div class="layui-col-md12">
        <div class="layui-card">
          <div class="layui-card-header">2、上传成绩</div>
          <div class="layui-card-body" style="min-height: 180px;">
            <p>
            <div class="layui-inline">
              <form>
                <div class="layui-input-inline" style="min-width: 300px">
                  <input type="text" id="url" name="url" autocomplete="off" class="layui-input " placeholder="地址" readonly>
                </div>
                <div class="layui-input-inline" style="min-width: 80px">
                  <button type="button" class="layui-btn" id="upload">
                    <i class="layui-icon">&#xe67c;</i>选择文件
                  </button>
                  <button type="button" class="layui-btn layui-btn-normal">
                    <i class="layui-icon">&#xe67c;</i>批传
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>


    </div>
  </div> 


{/block}

{block name="myjs"}
<script>
  // 日期控件
  layui.use(['upload'], function(){
    var upload = layui.upload;

    //执行实例
    var uploadInst = upload.render({
      elem: '#upload' //绑定元素
      ,url: "/rongyu/danwei/upload" //上传接口
      ,done: function(res){
        if(res.val == 1){
          $('#url').val(res.url);
        }else{
          layer.msg(res.msg);
        }
      }
      ,data: {
        category: '1011103'
        ,serurl:'chengji'
      }
      ,acceptMime:'.xls,.xlsx'
      ,exts:'xls|xlsx'
      ,auto:true
      ,error: function(){
        //请求异常回调
      }
    });
  });

</script>
{/block}

